import{m as W,p as S,D as N,f as C,L as B,g as Z,q as me,x as H,l as ce,z as fe,s as ie,F as X,A as ve,a as $,d as g,r as re,o as m,c as A,w as T,b as x,E as R,u as P,n as j,t as z,H as ge,G as ye,i as ue,v as be,M as ae,N as xe,O as Ve,e as te,K as we}from"./app-B5HxsIDL.js";import{i as le,s as he,o as F,A as Y,b as L,N as ne,a as M,d as ke,e as Se,f as $e,E as Oe,T as Pe,u as Ae}from"./form-UiGOnBLy.js";import{g as U,l as Le,a as G,p as Ce,u as Ee,b as Fe,e as Ue,h as je,d as qe,f as Re,O as Be}from"./use-text-value-DRdNcaOY.js";import{_ as Ie}from"./PrimaryButton-DJVM-8oG.js";function Te(e,s){return e===s}var Me=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Me||{}),De=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(De||{}),Ne=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ne||{});function ze(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let de=Symbol("ListboxContext");function _(e){let s=ve(de,null);if(s===null){let n=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,_),n}return s}let Ke=W({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Te},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:s,attrs:n,emit:o}){let l=C(1),d=C(null),t=C(null),u=C(null),f=C([]),y=C(""),w=C(null),r=C(1);function i(a=c=>c){let c=w.value!==null?f.value[w.value]:null,b=Be(a(f.value.slice()),E=>F(E.dataRef.domRef)),h=c?b.indexOf(c):null;return h===-1&&(h=null),{options:b,activeOptionIndex:h}}let O=S(()=>e.multiple?1:0),[k,V]=ke(S(()=>e.modelValue),a=>o("update:modelValue",a),S(()=>e.defaultValue)),q=S(()=>k.value===void 0?M(O.value,{1:[],0:void 0}):k.value),p={listboxState:l,value:q,mode:O,compare(a,c){if(typeof e.by=="string"){let b=e.by;return(a==null?void 0:a[b])===(c==null?void 0:c[b])}return e.by(a,c)},orientation:S(()=>e.horizontal?"horizontal":"vertical"),labelRef:d,buttonRef:t,optionsRef:u,disabled:S(()=>e.disabled),options:f,searchQuery:y,activeOptionIndex:w,activationTrigger:r,closeListbox(){e.disabled||l.value!==1&&(l.value=1,w.value=null)},openListbox(){e.disabled||l.value!==0&&(l.value=0)},goToOption(a,c,b){if(e.disabled||l.value===1)return;let h=i(),E=Re(a===U.Specific?{focus:U.Specific,id:c}:{focus:a},{resolveItems:()=>h.options,resolveActiveIndex:()=>h.activeOptionIndex,resolveId:D=>D.id,resolveDisabled:D=>D.dataRef.disabled});y.value="",w.value=E,r.value=b??1,f.value=h.options},search(a){if(e.disabled||l.value===1)return;let c=y.value!==""?0:1;y.value+=a.toLowerCase();let b=(w.value!==null?f.value.slice(w.value+c).concat(f.value.slice(0,w.value+c)):f.value).find(E=>E.dataRef.textValue.startsWith(y.value)&&!E.dataRef.disabled),h=b?f.value.indexOf(b):-1;h===-1||h===w.value||(w.value=h,r.value=1)},clearSearch(){e.disabled||l.value!==1&&y.value!==""&&(y.value="")},registerOption(a,c){let b=i(h=>[...h,{id:a,dataRef:c}]);f.value=b.options,w.value=b.activeOptionIndex},unregisterOption(a){let c=i(b=>{let h=b.findIndex(E=>E.id===a);return h!==-1&&b.splice(h,1),b});f.value=c.options,w.value=c.activeOptionIndex,r.value=1},theirOnChange(a){e.disabled||V(a)},select(a){e.disabled||V(M(O.value,{0:()=>a,1:()=>{let c=B(p.value.value).slice(),b=B(a),h=c.findIndex(E=>p.compare(b,B(E)));return h===-1?c.push(b):c.splice(h,1),c}}))}};Fe([t,u],(a,c)=>{var b;p.closeListbox(),Ue(c,je.Loose)||(a.preventDefault(),(b=F(t))==null||b.focus())},S(()=>l.value===0)),fe(de,p),qe(S(()=>M(l.value,{0:G.Open,1:G.Closed})));let v=S(()=>{var a;return(a=F(t))==null?void 0:a.closest("form")});return Z(()=>{H([v],()=>{if(!v.value||e.defaultValue===void 0)return;function a(){p.theirOnChange(e.defaultValue)}return v.value.addEventListener("reset",a),()=>{var c;(c=v.value)==null||c.removeEventListener("reset",a)}},{immediate:!0})}),()=>{let{name:a,modelValue:c,disabled:b,form:h,...E}=e,D={open:l.value===0,disabled:b,value:q.value};return ie(X,[...a!=null&&q.value!=null?Se({[a]:q.value}).map(([oe,pe])=>ie($e,Oe({features:Ae.Hidden,key:oe,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:h,disabled:b,name:oe,value:pe}))):[],Y({ourProps:{},theirProps:{...n,...Pe(E,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:D,slots:s,attrs:n,name:"Listbox"})])}}}),Ze=W({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:s,slots:n,expose:o}){var l;let d=(l=e.id)!=null?l:`headlessui-listbox-button-${le()}`,t=_("ListboxButton");o({el:t.buttonRef,$el:t.buttonRef});function u(r){switch(r.key){case L.Space:case L.Enter:case L.ArrowDown:r.preventDefault(),t.openListbox(),N(()=>{var i;(i=F(t.optionsRef))==null||i.focus({preventScroll:!0}),t.value.value||t.goToOption(U.First)});break;case L.ArrowUp:r.preventDefault(),t.openListbox(),N(()=>{var i;(i=F(t.optionsRef))==null||i.focus({preventScroll:!0}),t.value.value||t.goToOption(U.Last)});break}}function f(r){switch(r.key){case L.Space:r.preventDefault();break}}function y(r){t.disabled.value||(t.listboxState.value===0?(t.closeListbox(),N(()=>{var i;return(i=F(t.buttonRef))==null?void 0:i.focus({preventScroll:!0})})):(r.preventDefault(),t.openListbox(),ze(()=>{var i;return(i=F(t.optionsRef))==null?void 0:i.focus({preventScroll:!0})})))}let w=he(S(()=>({as:e.as,type:s.type})),t.buttonRef);return()=>{var r,i;let O={open:t.listboxState.value===0,disabled:t.disabled.value,value:t.value.value},{...k}=e,V={ref:t.buttonRef,id:d,type:w.value,"aria-haspopup":"listbox","aria-controls":(r=F(t.optionsRef))==null?void 0:r.id,"aria-expanded":t.listboxState.value===0,"aria-labelledby":t.labelRef.value?[(i=F(t.labelRef))==null?void 0:i.id,d].join(" "):void 0,disabled:t.disabled.value===!0?!0:void 0,onKeydown:u,onKeyup:f,onClick:y};return Y({ourProps:V,theirProps:k,slot:O,attrs:s,slots:n,name:"ListboxButton"})}}}),He=W({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:s,slots:n,expose:o}){var l;let d=(l=e.id)!=null?l:`headlessui-listbox-options-${le()}`,t=_("ListboxOptions"),u=C(null);o({el:t.optionsRef,$el:t.optionsRef});function f(r){switch(u.value&&clearTimeout(u.value),r.key){case L.Space:if(t.searchQuery.value!=="")return r.preventDefault(),r.stopPropagation(),t.search(r.key);case L.Enter:if(r.preventDefault(),r.stopPropagation(),t.activeOptionIndex.value!==null){let i=t.options.value[t.activeOptionIndex.value];t.select(i.dataRef.value)}t.mode.value===0&&(t.closeListbox(),N(()=>{var i;return(i=F(t.buttonRef))==null?void 0:i.focus({preventScroll:!0})}));break;case M(t.orientation.value,{vertical:L.ArrowDown,horizontal:L.ArrowRight}):return r.preventDefault(),r.stopPropagation(),t.goToOption(U.Next);case M(t.orientation.value,{vertical:L.ArrowUp,horizontal:L.ArrowLeft}):return r.preventDefault(),r.stopPropagation(),t.goToOption(U.Previous);case L.Home:case L.PageUp:return r.preventDefault(),r.stopPropagation(),t.goToOption(U.First);case L.End:case L.PageDown:return r.preventDefault(),r.stopPropagation(),t.goToOption(U.Last);case L.Escape:r.preventDefault(),r.stopPropagation(),t.closeListbox(),N(()=>{var i;return(i=F(t.buttonRef))==null?void 0:i.focus({preventScroll:!0})});break;case L.Tab:r.preventDefault(),r.stopPropagation();break;default:r.key.length===1&&(t.search(r.key),u.value=setTimeout(()=>t.clearSearch(),350));break}}let y=Le(),w=S(()=>y!==null?(y.value&G.Open)===G.Open:t.listboxState.value===0);return()=>{var r,i;let O={open:t.listboxState.value===0},{...k}=e,V={"aria-activedescendant":t.activeOptionIndex.value===null||(r=t.options.value[t.activeOptionIndex.value])==null?void 0:r.id,"aria-multiselectable":t.mode.value===1?!0:void 0,"aria-labelledby":(i=F(t.buttonRef))==null?void 0:i.id,"aria-orientation":t.orientation.value,id:d,onKeydown:f,role:"listbox",tabIndex:0,ref:t.optionsRef};return Y({ourProps:V,theirProps:k,slot:O,attrs:s,slots:n,features:ne.RenderStrategy|ne.Static,visible:w.value,name:"ListboxOptions"})}}}),Je=W({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:s,attrs:n,expose:o}){var l;let d=(l=e.id)!=null?l:`headlessui-listbox-option-${le()}`,t=_("ListboxOption"),u=C(null);o({el:u,$el:u});let f=S(()=>t.activeOptionIndex.value!==null?t.options.value[t.activeOptionIndex.value].id===d:!1),y=S(()=>M(t.mode.value,{0:()=>t.compare(B(t.value.value),B(e.value)),1:()=>B(t.value.value).some(a=>t.compare(B(a),B(e.value)))})),w=S(()=>M(t.mode.value,{1:()=>{var a;let c=B(t.value.value);return((a=t.options.value.find(b=>c.some(h=>t.compare(B(h),B(b.dataRef.value)))))==null?void 0:a.id)===d},0:()=>y.value})),r=Ce(u),i=S(()=>({disabled:e.disabled,value:e.value,get textValue(){return r()},domRef:u}));Z(()=>t.registerOption(d,i)),me(()=>t.unregisterOption(d)),Z(()=>{H([t.listboxState,y],()=>{t.listboxState.value===0&&y.value&&M(t.mode.value,{1:()=>{w.value&&t.goToOption(U.Specific,d)},0:()=>{t.goToOption(U.Specific,d)}})},{immediate:!0})}),ce(()=>{t.listboxState.value===0&&f.value&&t.activationTrigger.value!==0&&N(()=>{var a,c;return(c=(a=F(u))==null?void 0:a.scrollIntoView)==null?void 0:c.call(a,{block:"nearest"})})});function O(a){if(e.disabled)return a.preventDefault();t.select(e.value),t.mode.value===0&&(t.closeListbox(),N(()=>{var c;return(c=F(t.buttonRef))==null?void 0:c.focus({preventScroll:!0})}))}function k(){if(e.disabled)return t.goToOption(U.Nothing);t.goToOption(U.Specific,d)}let V=Ee();function q(a){V.update(a)}function p(a){V.wasMoved(a)&&(e.disabled||f.value||t.goToOption(U.Specific,d,0))}function v(a){V.wasMoved(a)&&(e.disabled||f.value&&t.goToOption(U.Nothing))}return()=>{let{disabled:a}=e,c={active:f.value,selected:y.value,disabled:a},{value:b,disabled:h,...E}=e,D={id:d,ref:u,role:"option",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-selected":y.value,disabled:void 0,onClick:O,onFocus:k,onPointerenter:q,onMouseenter:q,onPointermove:p,onMousemove:p,onPointerleave:v,onMouseleave:v};return Y({ourProps:D,theirProps:E,slot:c,attrs:n,slots:s,name:"ListboxOption"})}}});const Qe=(e,s)=>{const n=e.__vccOpts||e;for(const[o,l]of s)n[o]=l;return n},Ge={},We={class:"pb-2 relative p-8 rounded-lg shadow-md bg-white dark:ring-0 dark:bg-gray-700/60"},Xe={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4"};function Ye(e,s){return m(),$("div",We,[g("div",Xe,[re(e.$slots,"default")])])}const _e=Qe(Ge,[["render",Ye]]);function et(e,s){return m(),$("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[g("path",{"fill-rule":"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}function tt(e,s){return m(),$("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[g("path",{"fill-rule":"evenodd",d:"M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z","clip-rule":"evenodd"})])}function rt(e,s){return m(),$("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[g("path",{"fill-rule":"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z","clip-rule":"evenodd"})])}const lt={class:"relative"},ot={class:"block truncate"},it={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},ee={__name:"FieldOptions",props:{id:{type:String,required:!0},modelValue:{type:String,required:!0},options:{type:Array,required:!0},disabled:{type:Boolean,default:!1},right:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:s}){const n=e,o=s,l=S({get(){return n.options.find(d=>d.id===n.modelValue)},set(d){o("update:modelValue",d.id)}});return(d,t)=>(m(),A(P(Ke),{as:"div",modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=u=>l.value=u)},{default:T(()=>[g("div",lt,[x(P(Ze),{class:j([e.disabled?"cursor-default":"cursor-pointer focus-within:z-10 focus:ring-2 focus:ring-indigo-600 dark:focus:ring-indigo-400",e.right?"rounded-r-md":"rounded-l-md","relative w-full py-1.5 pl-3 pr-10 focus:outline-none text-sm leading-6 text-left ring-1 ring-inset bg-white text-gray-900 ring-gray-300 dark:bg-gray-800 dark:text-gray-200 dark:ring-gray-600"])},{default:T(()=>[g("span",ot,z(l.value.name),1),g("span",it,[e.disabled?R("",!0):(m(),A(P(tt),{key:0,class:"h-5 w-5 text-gray-400","aria-hidden":"true"}))])]),_:1},8,["class"]),e.disabled?R("",!0):(m(),A(ge,{key:0,"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:T(()=>[x(P(He),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 shadow-lg ring-1 ring-gray-300 dark:ring-white/10 focus:outline-none text-sm"},{default:T(()=>[(m(!0),$(X,null,ye(e.options,u=>(m(),A(P(Je),{as:"template",key:u.id,value:u},{default:T(({active:f,selected:y})=>[g("li",{class:j([f?"bg-gray-200 dark:bg-gray-300 dark:text-gray-900":"text-gray-900","relative cursor-default select-none py-2 px-3"])},[g("span",{class:j([y?"font-semibold":"font-normal","block truncate"])},z(u.name),3)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1}))])]),_:1},8,["modelValue"]))}},at={class:"pl-1 pt-1 text-sm text-red-600 dark:text-red-400"},J={__name:"InputError",props:{error:{type:String,required:!1}},setup(e){return(s,n)=>ue((m(),$("div",null,[g("p",at,z(e.error),1)],512)),[[be,e.error]])}},nt={key:0,class:"w-full"},st={class:"flex select-none items-center pl-3 text-sm text-gray-500 dark:text-gray-200"},ut=["type","id","name","placeholder","value","disabled"],dt={key:1,class:"w-full p-0 bg-transparent border-0"},pt=["type","id","name","placeholder","value","disabled"],I={__name:"TextInput",props:{id:{type:String,required:!0},type:{type:String,default:"text"},placeholder:{type:String,required:!1},modelValue:{type:[String,Number],required:!1},disabled:{type:Boolean,default:!1},error:{type:String,required:!1},showError:{type:Boolean,default:!0},class:{type:String,required:!1},prefix:{type:String,required:!1}},emits:["update:modelValue","update:error","apply"],setup(e,{emit:s}){const n=e,o=s,l=()=>n.class;return H(()=>n.modelValue,()=>{o("update:error","")}),(d,t)=>e.prefix?(m(),$("div",nt,[g("div",{class:j([l(),"flex w-full rounded-md focus-within:ring-2 focus-within:ring-inset ring-inset bg-white focus-within:ring-indigo-600 dark:bg-gray-800 dark:focus-within:ring-indigo-400",e.error&&e.showError?"ring-2 ring-red-500 dark:ring-red-400":"ring-1 ring-gray-300 dark:ring-gray-600"])},[g("span",st,z(e.prefix),1),g("input",{type:e.type,id:e.id,name:e.id,placeholder:e.placeholder,class:j(["block flex-1 border-0 bg-transparent py-1.5 pl-1 pr-3 focus:outline-none text-sm leading-6 focus:ring-0 placeholder:text-gray-400 dark:placeholder:text-gray-500",e.disabled?"text-gray-500 dark:text-gray-500":"text-gray-900 dark:text-gray-200"]),value:e.modelValue,disabled:e.disabled,onInput:t[0]||(t[0]=u=>d.$emit("update:modelValue",u.target.value)),onFocus:t[1]||(t[1]=u=>d.$emit("update:error","")),onKeyup:t[2]||(t[2]=ae(u=>d.$emit("apply"),["enter"]))},null,42,ut)],2),e.showError?(m(),A(J,{key:0,error:e.error},null,8,["error"])):R("",!0)])):(m(),$("div",dt,[g("input",{type:e.type,id:e.id,name:e.id,placeholder:e.placeholder,class:j([l(),"focus-within:z-10 block w-full rounded-md border-0 py-1.5 px-3 text-sm leading-6 ring-inset placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-600 dark:bg-gray-800 dark:placeholder:text-gray-500 dark:focus:ring-indigo-400",e.error&&e.showError?"ring-2 ring-red-500 dark:ring-red-400":"ring-1 ring-gray-300 dark:ring-gray-600",e.disabled?"text-gray-500 dark:text-gray-500":"text-gray-900 dark:text-gray-200"]),value:e.modelValue,disabled:e.disabled,onInput:t[3]||(t[3]=u=>d.$emit("update:modelValue",u.target.value)),onFocus:t[4]||(t[4]=u=>d.$emit("update:error","")),onKeyup:t[5]||(t[5]=ae(u=>d.$emit("apply"),["enter"]))},null,42,pt),e.showError?(m(),A(J,{key:0,error:e.error},null,8,["error"])):R("",!0)]))}};function Q(){const e=xe();return{storesChoice:()=>e.props.stores.choice,currentStore:()=>localStorage.currentStore&&e.props.stores.choice.find(l=>l.id===localStorage.currentStore)?localStorage.currentStore:e.props.stores.default,selectStore:l=>{localStorage.currentStore=l,window.location.reload()}}}const mt={class:"relative flex flex-grow items-stretch"},ct={__name:"AgentField",props:{modelValue:{type:Object,required:!1},rounded:{type:Boolean,default:!0},error:{type:String,required:!1},showError:{type:Boolean,default:!0}},emits:["update:modelValue","update:error","apply"],setup(e,{emit:s}){const{currentStore:n}=Q(),o=e,l=s,d=[{id:"mbox",name:"Mbox"},{id:"openid",name:"OpenID"},{id:"account",name:"Account"}],t=C("mbox"),u=C(""),f=C("");H(()=>o.modelValue,p=>{p===null&&(u.value="",f.value="")});const y=S({get(){if(!o.modelValue)return t.value;if(o.modelValue.mbox)return t.value="mbox","mbox";if(o.modelValue.openid)return t.value="openid","openid";if(o.modelValue.account)return t.value="account","account"},set(p){t.value!=p&&(t.value=p,u.value="",f.value="",l("update:modelValue",null))}}),w=S({get(){return o.modelValue&&o.modelValue.mbox?o.modelValue.mbox.substring(7):""},set(p){p.trim()?l("update:modelValue",{mbox:"mailto:"+p.trim()}):l("update:modelValue",null)}}),r=S({get(){return o.modelValue&&o.modelValue.openid?o.modelValue.openid:""},set(p){p.trim()?l("update:modelValue",{openid:p.trim()}):l("update:modelValue",null)}}),i=S({get(){return o.modelValue&&o.modelValue.account?o.modelValue.account.name:u.value},set(p){u.value=p,p.trim()||f.value.trim()?l("update:modelValue",{account:{name:p.trim(),homePage:f.value.trim()}}):l("update:modelValue",null)}}),O=S({get(){return o.modelValue&&o.modelValue.account?o.modelValue.account.homePage:f.value},set(p){f.value=p,p.trim()||u.value.trim()?l("update:modelValue",{account:{name:u.value.trim(),homePage:p.trim()}}):l("update:modelValue",null)}}),k="/trax/api/gateway/front/stores/"+n()+"/agent-ids",V=(p,v)=>v=="agent"?{sort:["sid_field_1"],limit:10,filters:{sid_type:t.value,in_sid_field_1:p},distinct:["sid_field_1"]}:{sort:["sid_field_2"],limit:10,filters:{sid_type:t.value,in_sid_field_2:p},distinct:["sid_field_2"]},q=(p,v)=>t.value=="mbox"?p.sid_field_1.split("mailto:")[1]:v=="agent"?p.sid_field_1:p.sid_field_2;return(p,v)=>(m(),$(X,null,[x(ee,{id:"agent-type",options:d,modelValue:y.value,"onUpdate:modelValue":v[0]||(v[0]=a=>y.value=a)},null,8,["modelValue"]),g("div",mt,[y.value==="mbox"?(m(),A(I,{key:0,id:"agent",prefix:"mailto:",placeholder:"agent@email.test",class:j([e.rounded?"rounded-none rounded-r":"rounded-none"]),modelValue:w.value,"onUpdate:modelValue":v[1]||(v[1]=a=>w.value=a),error:e.error,showError:e.showError,"onUpdate:error":v[2]||(v[2]=a=>p.$emit("update:error",a)),onApply:v[3]||(v[3]=a=>p.$emit("apply")),completionEndpoint:k,completionParams:V,completionFormatProposal:q},null,8,["class","modelValue","error","showError"])):R("",!0),y.value==="openid"?(m(),A(I,{key:1,id:"agent",placeholder:"http://openid",class:j([e.rounded?"rounded-none rounded-r":"rounded-none"]),modelValue:r.value,"onUpdate:modelValue":v[4]||(v[4]=a=>r.value=a),error:e.error,showError:e.showError,"onUpdate:error":v[5]||(v[5]=a=>p.$emit("update:error",a)),onApply:v[6]||(v[6]=a=>p.$emit("apply")),completionEndpoint:k,completionParams:V,completionFormatProposal:q},null,8,["class","modelValue","error","showError"])):R("",!0),y.value==="account"?(m(),A(I,{key:2,id:"agent",placeholder:"name",class:"rounded-none",modelValue:i.value,"onUpdate:modelValue":v[7]||(v[7]=a=>i.value=a),error:e.error,showError:e.showError,"onUpdate:error":v[8]||(v[8]=a=>p.$emit("update:error",a)),onApply:v[9]||(v[9]=a=>p.$emit("apply")),completionEndpoint:k,completionParams:V,completionFormatProposal:q},null,8,["modelValue","error","showError"])):R("",!0),y.value==="account"?(m(),A(I,{key:3,id:"agent_homepage",placeholder:"http://homepage",class:j([e.rounded?"rounded-none rounded-r":"rounded-none"]),modelValue:O.value,"onUpdate:modelValue":v[10]||(v[10]=a=>O.value=a),error:e.error,showError:e.showError,"onUpdate:error":v[11]||(v[11]=a=>p.$emit("update:error",a)),onApply:v[12]||(v[12]=a=>p.$emit("apply")),completionEndpoint:k,completionParams:V,completionFormatProposal:q},null,8,["class","modelValue","error","showError"])):R("",!0)])],64))}},ft={class:"basis-28 pt-1 block text-sm font-medium leading-6 text-gray-900 dark:text-gray-200"},vt={key:0},gt={key:1},K={__name:"InputLabel",props:{value:{type:String}},setup(e){return(s,n)=>(m(),$("label",ft,[e.value?(m(),$("span",vt,z(e.value),1)):(m(),$("span",gt,[re(s.$slots,"default")]))]))}},yt={class:"relative md:col-span-2 flex flex-row"},bt={class:"w-full"},xt={__name:"AgentFilterInStatements",props:{modelValue:{type:Object,required:!1},location:{type:String,default:"everywhere"},error:{type:String,required:!1}},emits:["update:modelValue","update:location","update:error","apply"],setup(e,{emit:s}){const n=e,o=s,l=[{id:"everywhere",name:"Everywhere"},{id:"actor",name:"As the actor"},{id:"object",name:"As the object"}];return Z(()=>{o("update:location",n.location)}),(d,t)=>(m(),$("div",yt,[x(K,{for:"agent",value:"Agent"}),g("div",bt,[g("div",{class:j(["flex rounded-md w-full",e.error?"ring-2 ring-red-500 dark:ring-red-400":""])},[x(ct,{rounded:!1,modelValue:e.modelValue,error:e.error,showError:!1,"onUpdate:modelValue":t[0]||(t[0]=u=>d.$emit("update:modelValue",u)),"onUpdate:error":t[1]||(t[1]=u=>d.$emit("update:error",u)),onApply:t[2]||(t[2]=u=>d.$emit("apply"))},null,8,["modelValue","error"]),x(ee,{id:"agent-where",right:!0,modelValue:e.location,"onUpdate:modelValue":t[3]||(t[3]=u=>d.$emit("update:location",u)),options:l},null,8,["modelValue"])],2),x(J,{error:e.error},null,8,["error"])])]))}},Vt={class:"relative md:col-span-2 flex flex-row"},wt="iri",ht={__name:"VerbFilter",props:{modelValue:{type:String,required:!0},error:{type:String,required:!1}},emits:["update:modelValue","update:error","apply"],setup(e){const{currentStore:s}=Q(),n="/trax/api/gateway/front/stores/"+s()+"/verbs",o=l=>({sort:["iri"],limit:10,filters:{in_iri:l}});return(l,d)=>(m(),$("div",Vt,[x(K,{for:"verb",value:"Verb"}),x(I,{id:"verb",placeholder:"http://adlnet.gov/expapi/verbs/completed",modelValue:e.modelValue,error:e.error,"onUpdate:modelValue":d[0]||(d[0]=t=>l.$emit("update:modelValue",t)),"onUpdate:error":d[1]||(d[1]=t=>l.$emit("update:error",t)),onApply:d[2]||(d[2]=t=>l.$emit("apply")),completionEndpoint:n,completionProp:wt,completionParams:o},null,8,["modelValue","error"])]))}},kt="iri",St={__name:"ActivityField",setup(e){const{currentStore:s}=Q(),n="/trax/api/gateway/front/stores/"+s()+"/activity-ids",o=l=>({sort:["iri"],limit:10,filters:{in_iri:l}});return(l,d)=>(m(),A(I,{id:"activity",placeholder:"http://my.lms.com/courses/xapi-101",completionEndpoint:n,completionProp:kt,completionParams:o}))}},$t={class:"relative md:col-span-2 flex flex-row"},Ot={class:"w-full"},Pt={class:"relative flex flex-grow items-stretch focus-within:z-10"},At={__name:"ActivityFilterInStatements",props:{modelValue:{type:String,required:!0},location:{type:String,default:"everywhere"},error:{type:String,required:!1}},emits:["update:modelValue","update:location","update:error","apply"],setup(e,{emit:s}){const n=e,o=s,l=[{id:"everywhere",name:"Everywhere"},{id:"object",name:"As the object"}];return Z(()=>{o("update:location",n.location)}),(d,t)=>(m(),$("div",$t,[x(K,{for:"activity",value:"Activity"}),g("div",Ot,[g("div",{class:j(["flex rounded-md w-full",e.error?"ring-2 ring-red-500 dark:ring-red-400":""])},[g("div",Pt,[x(St,{class:"rounded-none rounded-l",modelValue:e.modelValue,error:e.error,showError:!1,"onUpdate:modelValue":t[0]||(t[0]=u=>d.$emit("update:modelValue",u)),"onUpdate:error":t[1]||(t[1]=u=>d.$emit("update:error",u)),onApply:t[2]||(t[2]=u=>d.$emit("apply"))},null,8,["modelValue","error"])]),x(ee,{id:"activity-where",right:!0,modelValue:e.location,"onUpdate:modelValue":t[3]||(t[3]=u=>d.$emit("update:location",u)),options:l},null,8,["modelValue"])],2),x(J,{error:e.error},null,8,["error"])])]))}},Lt="iri",Ct={__name:"ActivityTypeField",setup(e){const{currentStore:s}=Q(),n="/trax/api/gateway/front/stores/"+s()+"/activity-types",o=l=>({sort:["iri"],limit:10,filters:{in_iri:l}});return(l,d)=>(m(),A(I,{id:"activity-type",placeholder:"https://w3id.org/xapi/cmi5/activitytype/course",completionEndpoint:n,completionProp:Lt,completionParams:o}))}},Et={class:"relative md:col-span-2 flex flex-row"},Ft={class:"w-full"},Ut={class:"relative flex flex-grow items-stretch focus-within:z-10"},jt={__name:"ActivityTypeFilterInStatements",props:{modelValue:{type:String,required:!0},error:{type:String,required:!1}},emits:["update:modelValue","update:error","apply"],setup(e){const s=[{id:"object",name:"In the object"}];return(n,o)=>(m(),$("div",Et,[x(K,{for:"activity-type",value:"Act. Type"}),g("div",Ft,[g("div",{class:j(["flex rounded-md w-full",e.error?"ring-2 ring-red-500 dark:ring-red-400":""])},[g("div",Ut,[x(Ct,{class:"rounded-none rounded-l",modelValue:e.modelValue,error:e.error,showError:!1,"onUpdate:modelValue":o[0]||(o[0]=l=>n.$emit("update:modelValue",l)),"onUpdate:error":o[1]||(o[1]=l=>n.$emit("update:error",l)),onApply:o[2]||(o[2]=l=>n.$emit("apply"))},null,8,["modelValue","error"])]),x(ee,{id:"activity-type-where",right:!0,disabled:!0,modelValue:"object",options:s})],2),x(J,{error:e.error},null,8,["error"])])]))}},qt={class:"relative md:col-span-2 flex flex-row"},Rt="iri",Bt={__name:"XapiProfileFilter",props:{modelValue:{type:String,required:!0},error:{type:String,required:!1}},emits:["update:modelValue","update:error","apply"],setup(e){const{currentStore:s}=Q(),n="/trax/api/gateway/front/stores/"+s()+"/activities",o=l=>({sort:["iri"],limit:10,filters:{in_iri:l,is_category:1}});return(l,d)=>(m(),$("div",qt,[x(K,{for:"profile",value:"xAPI Profile"}),x(I,{id:"profile",placeholder:"https://w3id.org/xapi/cmi5/context/categories/cmi5",modelValue:e.modelValue,error:e.error,"onUpdate:modelValue":d[0]||(d[0]=t=>l.$emit("update:modelValue",t)),"onUpdate:error":d[1]||(d[1]=t=>l.$emit("update:error",t)),completionEndpoint:n,completionProp:Rt,completionParams:o},null,8,["modelValue","error"])]))}},se={__name:"TimestampFilter",props:{id:{type:String,required:!0}},setup(e){return(s,n)=>(m(),A(I,{id:e.id,placeholder:"2020-12-31 23:59:59"},null,8,["id"]))}},It={class:"relative flex flex-row"},Tt={class:"relative flex flex-row"},Mt={__name:"TimeFilters",props:{since:{type:String,required:!0},until:{type:String,required:!0},errors:{type:Object,required:!0}},emits:["update:since","update:until","apply"],setup(e){return(s,n)=>(m(),$(X,null,[g("div",It,[x(K,{for:"since",value:"Since (>=)",class:"sm:basis-32"}),x(se,{id:"since",modelValue:e.since,error:e.errors.since,"onUpdate:error":n[0]||(n[0]=o=>e.errors.since=o),"onUpdate:modelValue":n[1]||(n[1]=o=>s.$emit("update:since",o)),onApply:n[2]||(n[2]=o=>s.$emit("apply"))},null,8,["modelValue","error"])]),g("div",Tt,[x(K,{for:"until",value:"Until (<)"}),x(se,{id:"until",modelValue:e.until,error:e.errors.until,"onUpdate:error":n[3]||(n[3]=o=>e.errors.until=o),"onUpdate:modelValue":n[4]||(n[4]=o=>s.$emit("update:until",o)),onApply:n[5]||(n[5]=o=>s.$emit("apply"))},null,8,["modelValue","error"])])],64))}},Dt={class:"relative flex items-start"},Nt={class:"flex h-6 items-center"},zt={class:"group grid size-4 grid-cols-1"},Kt=["name","id","disabled"],Zt={class:"ml-3 text-sm leading-6"},Ht=["for"],Jt={__name:"Checkbox",props:{id:{type:String,required:!0},label:{type:String,required:!0},modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:s}){const n=e,o=s,l=S({get(){return n.modelValue},set(d){o("update:modelValue",d)}});return(d,t)=>(m(),$("div",Dt,[g("div",Nt,[g("div",zt,[ue(g("input",{name:e.id,id:e.id,type:"checkbox",disabled:e.disabled,class:"cursor-pointer col-start-1 row-start-1 appearance-none rounded-sm border border-gray-300 checked:border-indigo-600 indeterminate:border-indigo-600 dark:border-white/10 dark:checked:border-indigo-500 dark:indeterminate:border-indigo-500 bg-white checked:bg-indigo-600 indeterminate:bg-indigo-600 dark:bg-white/5 dark:checked:bg-indigo-500 dark:indeterminate:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 dark:focus-visible:outline-indigo-500 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:checked:bg-white/10 forced-colors:appearance-auto","onUpdate:modelValue":t[0]||(t[0]=u=>l.value=u)},null,8,Kt),[[Ve,l.value]]),t[1]||(t[1]=g("svg",{class:"pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-white/25",viewBox:"0 0 14 14",fill:"none"},[g("path",{class:"opacity-0 group-has-checked:opacity-100",d:"M3 8L6 11L11 3.5","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),g("path",{class:"opacity-0 group-has-indeterminate:opacity-100",d:"M3 7H11","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))])]),g("div",Zt,[g("label",{for:e.id,class:j(["font-medium",e.disabled?"text-gray-500 dark:text-gray-500":"text-gray-900 dark:text-gray-200 cursor-pointer"])},z(e.label),11,Ht)])]))}},Qt=["disabled"],Gt={key:0,"aria-hidden":"true",role:"status",class:"inline w-4 h-4 mr-2 text-indigo animate-spin",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Wt={__name:"LinkButton",props:{processing:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:s}){return(n,o)=>(m(),$("button",{type:"button",onClick:o[0]||(o[0]=l=>n.$emit("click")),disabled:e.processing,class:j([e.processing?"":"hover:text-indigo-500 hover:dark:text-fuchsia-400 dark:hover:bg-white/10","cursor-pointer rounded px-3.5 py-2 text-sm font-semibold text-indigo-600 bg-transparent focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 dark:text-fuchsia-400 dark:focus-visible:outline-fuchsia-400"])},[e.processing?(m(),$("svg",Gt,[...o[1]||(o[1]=[g("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor","fill-opacity":"0.4"},null,-1),g("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentColor"},null,-1)])])):R("",!0),re(n.$slots,"default")],10,Qt))}},Xt={__name:"MoreLessButton",props:{moreLabel:{type:String,default:"More"},lessLabel:{type:String,default:"Less"},modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:s}){return(n,o)=>(m(),$("button",{type:"button",onClick:o[0]||(o[0]=l=>n.$emit("update:modelValue",!e.modelValue)),class:"cursor-pointer inline-flex items-center gap-x-1 rounded px-3.5 py-2 text-sm font-semibold text-indigo-600 bg-transparent focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 hover:text-indigo-500 dark:hover:bg-white/10 dark:text-fuchsia-400 dark:hover:text-fuchsia-400 dark:focus-visible:outline-fuchsia-400"},[te(z(e.modelValue?e.lessLabel:e.moreLabel)+" ",1),e.modelValue?(m(),A(P(rt),{key:0,class:"-mr-0.5 h-5 w-5","aria-hidden":"true"})):(m(),A(P(et),{key:1,class:"-mr-0.5 h-5 w-5","aria-hidden":"true"}))]))}};function Yt(e,s){const n=C(!1),o=C(!1),l=C(!1),d={...e.filters},t={...e.options};Z(()=>{u()});const u=()=>{if(s.localStorage){let i=localStorage.getItem(s.localStorage);if(i){i=JSON.parse(i),l.value=i.settings.showMoreFilters,Object.assign(e.filters,i.filters),Object.assign(e.options,i.options),y(!1);return}}y(!1)},f=()=>{s.resetFilters!==void 0?s.resetFilters():(Object.assign(e.filters,d),Object.assign(e.options,t)),y(),n.value=!1,o.value=!0},y=(i=!0)=>{const O={filters:{},options:{}};Object.keys(e.filters).forEach(k=>{w(e.filters,O.filters,k)}),Object.keys(e.options).forEach(k=>{w(e.options,O.options,k)}),i&&r(),n.value=!0,s.emit&&s.emit("apply",O),s.callback&&s.callback(O)},w=(i,O,k)=>{let V=i[k];V!=null&&(typeof V=="string"&&!V.trim()&&(i[k]=""),typeof V=="string"&&V.trim()&&(O[k]=V.trim()),(typeof V=="boolean"||typeof V=="number")&&(O[k]=V),typeof V=="object"&&(O[k]=JSON.stringify(V)))},r=()=>{s.localStorage&&localStorage.setItem(s.localStorage,JSON.stringify({filters:e.filters,options:e.options,settings:{showMoreFilters:l.value}}))};return H(()=>e.counter,()=>{n.value=!1,o.value=!1}),{resetingFilters:o,resetFilters:f,applyingFilters:n,applyFilters:y,showMoreFilters:l,recordFilters:r}}const _t={class:"relative text-right space-x-5"},er={class:"relative text-center md:col-span-2 -mt-5"},tr={__name:"StatementFilters",props:{filters:{type:Object,required:!0},options:{type:Object,required:!0},counter:{type:Number,required:!0},errors:{type:Object,required:!0}},emits:["apply"],setup(e,{emit:s}){const n=s,o=e,{resetingFilters:l,resetFilters:d,applyingFilters:t,applyFilters:u,showMoreFilters:f,recordFilters:y}=Yt(o,{localStorage:"statement-filters",emit:n});return H(f,w=>{y(),w||Object.assign(o.filters,{type:"",profile:"",since:"",until:""})}),(w,r)=>(m(),A(_e,null,{default:T(()=>[x(xt,{modelValue:e.filters.agent,"onUpdate:modelValue":r[0]||(r[0]=i=>e.filters.agent=i),location:e.options.agent_location,"onUpdate:location":r[1]||(r[1]=i=>e.options.agent_location=i),error:e.errors.agent,"onUpdate:error":r[2]||(r[2]=i=>e.errors.agent=i),onApply:P(u)},null,8,["modelValue","location","error","onApply"]),x(ht,{modelValue:e.filters.verb,"onUpdate:modelValue":r[3]||(r[3]=i=>e.filters.verb=i),error:e.errors.verb,"onUpdate:error":r[4]||(r[4]=i=>e.errors.verb=i),onApply:P(u)},null,8,["modelValue","error","onApply"]),x(At,{modelValue:e.filters.activity,"onUpdate:modelValue":r[5]||(r[5]=i=>e.filters.activity=i),location:e.options.activity_location,"onUpdate:location":r[6]||(r[6]=i=>e.options.activity_location=i),error:e.errors.activity,"onUpdate:error":r[7]||(r[7]=i=>e.errors.activity=i),onApply:P(u)},null,8,["modelValue","location","error","onApply"]),P(f)?(m(),A(jt,{key:0,modelValue:e.filters.type,"onUpdate:modelValue":r[8]||(r[8]=i=>e.filters.type=i),error:e.errors.type,"onUpdate:error":r[9]||(r[9]=i=>e.errors.type=i),onApply:P(u)},null,8,["modelValue","error","onApply"])):R("",!0),P(f)?(m(),A(Bt,{key:1,modelValue:e.filters.profile,"onUpdate:modelValue":r[10]||(r[10]=i=>e.filters.profile=i),error:e.errors.profile,"onUpdate:error":r[11]||(r[11]=i=>e.errors.profile=i),onApply:P(u)},null,8,["modelValue","error","onApply"])):R("",!0),P(f)?(m(),A(Mt,{key:2,since:e.filters.since,"onUpdate:since":r[12]||(r[12]=i=>e.filters.since=i),until:e.filters.until,"onUpdate:until":r[13]||(r[13]=i=>e.filters.until=i),errors:e.errors,onApply:P(u)},null,8,["since","until","errors","onApply"])):R("",!0),x(Jt,{id:"ascending",label:"Chronological",modelValue:e.options.ascending,"onUpdate:modelValue":r[14]||(r[14]=i=>e.options.ascending=i)},null,8,["modelValue"]),g("div",_t,[x(Wt,{processing:P(l),onClick:P(d)},{default:T(()=>[...r[16]||(r[16]=[te("Reset",-1)])]),_:1},8,["processing","onClick"]),x(Ie,{processing:P(t),onClick:P(u)},{default:T(()=>[...r[17]||(r[17]=[te("Apply",-1)])]),_:1},8,["processing","onClick"])]),g("div",er,[x(Xt,{modelValue:P(f),"onUpdate:modelValue":r[15]||(r[15]=i=>we(f)?f.value=i:null),moreLabel:"More filters",lessLabel:"Less filters"},null,8,["modelValue"])])]),_:1}))}},ar=Object.freeze(Object.defineProperty({__proto__:null,default:tr},Symbol.toStringTag,{value:"Module"}));export{He as A,Je as F,Ke as I,ar as S,Qe as _,rt as a,tr as b,Ze as j,tt as r,Q as u};
