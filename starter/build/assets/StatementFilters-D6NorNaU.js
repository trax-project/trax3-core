import{k as W,f as L,l as k,K as I,x as me,g as Z,q as H,p as ie,F as X,m as ce,j as fe,C as N,y as ve,o as m,a as $,d as y,r as le,c as A,w as T,b,u as P,n as j,t as z,E as R,G as ge,D as ye,h as ue,v as be,L as ne,Q as xe,M as Ve,e as te,J as we}from"./app-Bb4JmQa2.js";import{d as he,u as M,o as F,e as Se,f as ke,E as $e,s as Oe,A as Y,T as Pe,I as re,b as Ae,N as ae,a as C}from"./form-BuHMusc_.js";import{f as Ce,g as U,b as Le,e as Ee,h as Fe,d as Ue,a as G,l as je,p as qe,u as Re,O as Ie}from"./use-text-value-CEFPG7Mt.js";import{_ as Be}from"./PrimaryButton-BlSGxr80.js";function Te(e,s){return e===s}var Me=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Me||{}),De=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(De||{}),Ne=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ne||{});function ze(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let de=Symbol("ListboxContext");function _(e){let s=ve(de,null);if(s===null){let a=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,_),a}return s}let Ke=W({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Te},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:s,attrs:a,emit:i}){let r=L(1),d=L(null),t=L(null),u=L(null),f=L([]),g=L(""),w=L(null),l=L(1);function o(n=c=>c){let c=w.value!==null?f.value[w.value]:null,x=Ie(n(f.value.slice()),E=>F(E.dataRef.domRef)),h=c?x.indexOf(c):null;return h===-1&&(h=null),{options:x,activeOptionIndex:h}}let O=k(()=>e.multiple?1:0),[S,V]=he(k(()=>e.modelValue),n=>i("update:modelValue",n),k(()=>e.defaultValue)),q=k(()=>S.value===void 0?M(O.value,{1:[],0:void 0}):S.value),p={listboxState:r,value:q,mode:O,compare(n,c){if(typeof e.by=="string"){let x=e.by;return(n==null?void 0:n[x])===(c==null?void 0:c[x])}return e.by(n,c)},orientation:k(()=>e.horizontal?"horizontal":"vertical"),labelRef:d,buttonRef:t,optionsRef:u,disabled:k(()=>e.disabled),options:f,searchQuery:g,activeOptionIndex:w,activationTrigger:l,closeListbox(){e.disabled||r.value!==1&&(r.value=1,w.value=null)},openListbox(){e.disabled||r.value!==0&&(r.value=0)},goToOption(n,c,x){if(e.disabled||r.value===1)return;let h=o(),E=Ce(n===U.Specific?{focus:U.Specific,id:c}:{focus:n},{resolveItems:()=>h.options,resolveActiveIndex:()=>h.activeOptionIndex,resolveId:D=>D.id,resolveDisabled:D=>D.dataRef.disabled});g.value="",w.value=E,l.value=x??1,f.value=h.options},search(n){if(e.disabled||r.value===1)return;let c=g.value!==""?0:1;g.value+=n.toLowerCase();let x=(w.value!==null?f.value.slice(w.value+c).concat(f.value.slice(0,w.value+c)):f.value).find(E=>E.dataRef.textValue.startsWith(g.value)&&!E.dataRef.disabled),h=x?f.value.indexOf(x):-1;h===-1||h===w.value||(w.value=h,l.value=1)},clearSearch(){e.disabled||r.value!==1&&g.value!==""&&(g.value="")},registerOption(n,c){let x=o(h=>[...h,{id:n,dataRef:c}]);f.value=x.options,w.value=x.activeOptionIndex},unregisterOption(n){let c=o(x=>{let h=x.findIndex(E=>E.id===n);return h!==-1&&x.splice(h,1),x});f.value=c.options,w.value=c.activeOptionIndex,l.value=1},theirOnChange(n){e.disabled||V(n)},select(n){e.disabled||V(M(O.value,{0:()=>n,1:()=>{let c=I(p.value.value).slice(),x=I(n),h=c.findIndex(E=>p.compare(x,I(E)));return h===-1?c.push(x):c.splice(h,1),c}}))}};Le([t,u],(n,c)=>{var x;p.closeListbox(),Ee(c,Fe.Loose)||(n.preventDefault(),(x=F(t))==null||x.focus())},k(()=>r.value===0)),me(de,p),Ue(k(()=>M(r.value,{0:G.Open,1:G.Closed})));let v=k(()=>{var n;return(n=F(t))==null?void 0:n.closest("form")});return Z(()=>{H([v],()=>{if(!v.value||e.defaultValue===void 0)return;function n(){p.theirOnChange(e.defaultValue)}return v.value.addEventListener("reset",n),()=>{var c;(c=v.value)==null||c.removeEventListener("reset",n)}},{immediate:!0})}),()=>{let{name:n,modelValue:c,disabled:x,form:h,...E}=e,D={open:r.value===0,disabled:x,value:q.value};return ie(X,[...n!=null&&q.value!=null?Se({[n]:q.value}).map(([oe,pe])=>ie(ke,$e({features:Oe.Hidden,key:oe,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:h,name:oe,value:pe}))):[],Y({ourProps:{},theirProps:{...a,...Pe(E,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:D,slots:s,attrs:a,name:"Listbox"})])}}}),Ze=W({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:s,slots:a,expose:i}){var r;let d=(r=e.id)!=null?r:`headlessui-listbox-button-${re()}`,t=_("ListboxButton");i({el:t.buttonRef,$el:t.buttonRef});function u(l){switch(l.key){case C.Space:case C.Enter:case C.ArrowDown:l.preventDefault(),t.openListbox(),N(()=>{var o;(o=F(t.optionsRef))==null||o.focus({preventScroll:!0}),t.value.value||t.goToOption(U.First)});break;case C.ArrowUp:l.preventDefault(),t.openListbox(),N(()=>{var o;(o=F(t.optionsRef))==null||o.focus({preventScroll:!0}),t.value.value||t.goToOption(U.Last)});break}}function f(l){switch(l.key){case C.Space:l.preventDefault();break}}function g(l){t.disabled.value||(t.listboxState.value===0?(t.closeListbox(),N(()=>{var o;return(o=F(t.buttonRef))==null?void 0:o.focus({preventScroll:!0})})):(l.preventDefault(),t.openListbox(),ze(()=>{var o;return(o=F(t.optionsRef))==null?void 0:o.focus({preventScroll:!0})})))}let w=Ae(k(()=>({as:e.as,type:s.type})),t.buttonRef);return()=>{var l,o;let O={open:t.listboxState.value===0,disabled:t.disabled.value,value:t.value.value},{...S}=e,V={ref:t.buttonRef,id:d,type:w.value,"aria-haspopup":"listbox","aria-controls":(l=F(t.optionsRef))==null?void 0:l.id,"aria-expanded":t.listboxState.value===0,"aria-labelledby":t.labelRef.value?[(o=F(t.labelRef))==null?void 0:o.id,d].join(" "):void 0,disabled:t.disabled.value===!0?!0:void 0,onKeydown:u,onKeyup:f,onClick:g};return Y({ourProps:V,theirProps:S,slot:O,attrs:s,slots:a,name:"ListboxButton"})}}}),He=W({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:s,slots:a,expose:i}){var r;let d=(r=e.id)!=null?r:`headlessui-listbox-options-${re()}`,t=_("ListboxOptions"),u=L(null);i({el:t.optionsRef,$el:t.optionsRef});function f(l){switch(u.value&&clearTimeout(u.value),l.key){case C.Space:if(t.searchQuery.value!=="")return l.preventDefault(),l.stopPropagation(),t.search(l.key);case C.Enter:if(l.preventDefault(),l.stopPropagation(),t.activeOptionIndex.value!==null){let o=t.options.value[t.activeOptionIndex.value];t.select(o.dataRef.value)}t.mode.value===0&&(t.closeListbox(),N(()=>{var o;return(o=F(t.buttonRef))==null?void 0:o.focus({preventScroll:!0})}));break;case M(t.orientation.value,{vertical:C.ArrowDown,horizontal:C.ArrowRight}):return l.preventDefault(),l.stopPropagation(),t.goToOption(U.Next);case M(t.orientation.value,{vertical:C.ArrowUp,horizontal:C.ArrowLeft}):return l.preventDefault(),l.stopPropagation(),t.goToOption(U.Previous);case C.Home:case C.PageUp:return l.preventDefault(),l.stopPropagation(),t.goToOption(U.First);case C.End:case C.PageDown:return l.preventDefault(),l.stopPropagation(),t.goToOption(U.Last);case C.Escape:l.preventDefault(),l.stopPropagation(),t.closeListbox(),N(()=>{var o;return(o=F(t.buttonRef))==null?void 0:o.focus({preventScroll:!0})});break;case C.Tab:l.preventDefault(),l.stopPropagation();break;default:l.key.length===1&&(t.search(l.key),u.value=setTimeout(()=>t.clearSearch(),350));break}}let g=je(),w=k(()=>g!==null?(g.value&G.Open)===G.Open:t.listboxState.value===0);return()=>{var l,o;let O={open:t.listboxState.value===0},{...S}=e,V={"aria-activedescendant":t.activeOptionIndex.value===null||(l=t.options.value[t.activeOptionIndex.value])==null?void 0:l.id,"aria-multiselectable":t.mode.value===1?!0:void 0,"aria-labelledby":(o=F(t.buttonRef))==null?void 0:o.id,"aria-orientation":t.orientation.value,id:d,onKeydown:f,role:"listbox",tabIndex:0,ref:t.optionsRef};return Y({ourProps:V,theirProps:S,slot:O,attrs:s,slots:a,features:ae.RenderStrategy|ae.Static,visible:w.value,name:"ListboxOptions"})}}}),Je=W({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:s,attrs:a,expose:i}){var r;let d=(r=e.id)!=null?r:`headlessui-listbox-option-${re()}`,t=_("ListboxOption"),u=L(null);i({el:u,$el:u});let f=k(()=>t.activeOptionIndex.value!==null?t.options.value[t.activeOptionIndex.value].id===d:!1),g=k(()=>M(t.mode.value,{0:()=>t.compare(I(t.value.value),I(e.value)),1:()=>I(t.value.value).some(n=>t.compare(I(n),I(e.value)))})),w=k(()=>M(t.mode.value,{1:()=>{var n;let c=I(t.value.value);return((n=t.options.value.find(x=>c.some(h=>t.compare(I(h),I(x.dataRef.value)))))==null?void 0:n.id)===d},0:()=>g.value})),l=qe(u),o=k(()=>({disabled:e.disabled,value:e.value,get textValue(){return l()},domRef:u}));Z(()=>t.registerOption(d,o)),ce(()=>t.unregisterOption(d)),Z(()=>{H([t.listboxState,g],()=>{t.listboxState.value===0&&g.value&&M(t.mode.value,{1:()=>{w.value&&t.goToOption(U.Specific,d)},0:()=>{t.goToOption(U.Specific,d)}})},{immediate:!0})}),fe(()=>{t.listboxState.value===0&&f.value&&t.activationTrigger.value!==0&&N(()=>{var n,c;return(c=(n=F(u))==null?void 0:n.scrollIntoView)==null?void 0:c.call(n,{block:"nearest"})})});function O(n){if(e.disabled)return n.preventDefault();t.select(e.value),t.mode.value===0&&(t.closeListbox(),N(()=>{var c;return(c=F(t.buttonRef))==null?void 0:c.focus({preventScroll:!0})}))}function S(){if(e.disabled)return t.goToOption(U.Nothing);t.goToOption(U.Specific,d)}let V=Re();function q(n){V.update(n)}function p(n){V.wasMoved(n)&&(e.disabled||f.value||t.goToOption(U.Specific,d,0))}function v(n){V.wasMoved(n)&&(e.disabled||f.value&&t.goToOption(U.Nothing))}return()=>{let{disabled:n}=e,c={active:f.value,selected:g.value,disabled:n},{value:x,disabled:h,...E}=e,D={id:d,ref:u,role:"option",tabIndex:n===!0?void 0:-1,"aria-disabled":n===!0?!0:void 0,"aria-selected":g.value,disabled:void 0,onClick:O,onFocus:S,onPointerenter:q,onMouseenter:q,onPointermove:p,onMousemove:p,onPointerleave:v,onMouseleave:v};return Y({ourProps:D,theirProps:E,slot:c,attrs:a,slots:s,name:"ListboxOption"})}}});const Qe=(e,s)=>{const a=e.__vccOpts||e;for(const[i,r]of s)a[i]=r;return a},Ge={},We={class:"pb-2 relative p-8 rounded-lg shadow-md bg-white dark:ring-0 dark:bg-gray-700/60"},Xe={class:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4"};function Ye(e,s){return m(),$("div",We,[y("div",Xe,[le(e.$slots,"default")])])}const _e=Qe(Ge,[["render",Ye]]);function et(e,s){return m(),$("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[y("path",{"fill-rule":"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}function tt(e,s){return m(),$("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[y("path",{"fill-rule":"evenodd",d:"M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z","clip-rule":"evenodd"})])}function lt(e,s){return m(),$("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[y("path",{"fill-rule":"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z","clip-rule":"evenodd"})])}const rt={class:"relative"},ot={class:"block truncate"},it={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},ee={__name:"FieldOptions",props:{id:{type:String,required:!0},modelValue:{type:String,required:!0},options:{type:Array,required:!0},disabled:{type:Boolean,default:!1},right:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:s}){const a=e,i=s,r=k({get(){return a.options.find(d=>d.id===a.modelValue)},set(d){i("update:modelValue",d.id)}});return(d,t)=>(m(),A(P(Ke),{as:"div",modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=u=>r.value=u)},{default:T(()=>[y("div",rt,[b(P(Ze),{class:j([e.disabled?"cursor-default":"cursor-pointer focus-within:z-10 focus:outline-none focus:ring-2 focus:ring-indigo-600 dark:focus:ring-indigo-400",e.right?"rounded-r-md":"rounded-l-md","relative w-full py-1.5 pl-3 pr-10 text-sm leading-6 text-left ring-1 ring-inset bg-white text-gray-900 ring-gray-300 dark:bg-gray-800 dark:text-gray-200 dark:ring-gray-600"])},{default:T(()=>[y("span",ot,z(r.value.name),1),y("span",it,[e.disabled?R("",!0):(m(),A(P(tt),{key:0,class:"h-5 w-5 text-gray-400","aria-hidden":"true"}))])]),_:1},8,["class"]),e.disabled?R("",!0):(m(),A(ge,{key:0,"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:T(()=>[b(P(He),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none text-sm"},{default:T(()=>[(m(!0),$(X,null,ye(e.options,u=>(m(),A(P(Je),{as:"template",key:u.id,value:u},{default:T(({active:f,selected:g})=>[y("li",{class:j([f?"bg-gray-200 dark:bg-gray-300 dark:text-gray-900":"text-gray-900","relative cursor-default select-none py-2 px-3"])},[y("span",{class:j([g?"font-semibold":"font-normal","block truncate"])},z(u.name),3)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1}))])]),_:1},8,["modelValue"]))}},nt={class:"pl-1 pt-1 text-sm text-red-600 dark:text-red-400"},J={__name:"InputError",props:{error:{type:String,required:!1}},setup(e){return(s,a)=>ue((m(),$("div",null,[y("p",nt,z(e.error),1)],512)),[[be,e.error]])}},at={key:0,class:"w-full"},st={class:"flex select-none items-center pl-3 text-sm text-gray-500 dark:text-gray-200"},ut=["type","id","name","placeholder","value","disabled"],dt={key:1,class:"w-full p-0 bg-transparent border-0"},pt=["type","id","name","placeholder","value","disabled"],B={__name:"TextInput",props:{id:{type:String,required:!0},type:{type:String,default:"text"},placeholder:{type:String,required:!1},modelValue:{type:[String,Number],required:!1},disabled:{type:Boolean,default:!1},error:{type:String,required:!1},showError:{type:Boolean,default:!0},class:{type:String,required:!1},prefix:{type:String,required:!1}},emits:["update:modelValue","update:error","apply"],setup(e,{emit:s}){const a=e,i=s,r=()=>a.class;return H(()=>a.modelValue,()=>{i("update:error","")}),(d,t)=>e.prefix?(m(),$("div",at,[y("div",{class:j([r(),"flex w-full rounded-md focus-within:ring-2 focus-within:ring-inset ring-inset bg-white focus-within:ring-indigo-600 dark:bg-gray-800 dark:focus-within:ring-indigo-400",e.error&&e.showError?"ring-2 ring-red-500 dark:ring-red-400":"ring-1 ring-gray-300 dark:ring-gray-600"])},[y("span",st,z(e.prefix),1),y("input",{type:e.type,id:e.id,name:e.id,placeholder:e.placeholder,class:j(["block flex-1 border-0 bg-transparent py-1.5 pl-1 text-sm leading-6 focus:ring-0 placeholder:text-gray-400 dark:placeholder:text-gray-500",e.disabled?"text-gray-500 dark:text-gray-500":"text-gray-900 dark:text-gray-200"]),value:e.modelValue,disabled:e.disabled,onInput:t[0]||(t[0]=u=>d.$emit("update:modelValue",u.target.value)),onFocus:t[1]||(t[1]=u=>d.$emit("update:error","")),onKeyup:t[2]||(t[2]=ne(u=>d.$emit("apply"),["enter"]))},null,42,ut)],2),e.showError?(m(),A(J,{key:0,error:e.error},null,8,["error"])):R("",!0)])):(m(),$("div",dt,[y("input",{type:e.type,id:e.id,name:e.id,placeholder:e.placeholder,class:j([r(),"focus-within:z-10 block w-full rounded-md border-0 py-1.5 text-sm leading-6 ring-inset placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 dark:bg-gray-800 dark:placeholder:text-gray-500 dark:focus:ring-indigo-400",e.error&&e.showError?"ring-2 ring-red-500 dark:ring-red-400":"ring-1 ring-gray-300 dark:ring-gray-600",e.disabled?"text-gray-500 dark:text-gray-500":"text-gray-900 dark:text-gray-200"]),value:e.modelValue,disabled:e.disabled,onInput:t[3]||(t[3]=u=>d.$emit("update:modelValue",u.target.value)),onFocus:t[4]||(t[4]=u=>d.$emit("update:error","")),onKeyup:t[5]||(t[5]=ne(u=>d.$emit("apply"),["enter"]))},null,42,pt),e.showError?(m(),A(J,{key:0,error:e.error},null,8,["error"])):R("",!0)]))}};function Q(){const e=xe();return{storesChoice:()=>e.props.stores.choice,currentStore:()=>localStorage.currentStore&&e.props.stores.choice.find(r=>r.id===localStorage.currentStore)?localStorage.currentStore:e.props.stores.default,selectStore:r=>{localStorage.currentStore=r,window.location.reload()}}}const mt={class:"relative flex flex-grow items-stretch"},ct={__name:"AgentField",props:{modelValue:{type:Object,required:!1},rounded:{type:Boolean,default:!0},error:{type:String,required:!1},showError:{type:Boolean,default:!0}},emits:["update:modelValue","update:error","apply"],setup(e,{emit:s}){const{currentStore:a}=Q(),i=e,r=s,d=[{id:"mbox",name:"Mbox"},{id:"openid",name:"OpenID"},{id:"account",name:"Account"}],t=L("mbox"),u=L(""),f=L("");H(()=>i.modelValue,p=>{p===null&&(u.value="",f.value="")});const g=k({get(){if(!i.modelValue)return t.value;if(i.modelValue.mbox)return t.value="mbox","mbox";if(i.modelValue.openid)return t.value="openid","openid";if(i.modelValue.account)return t.value="account","account"},set(p){t.value!=p&&(t.value=p,u.value="",f.value="",r("update:modelValue",null))}}),w=k({get(){return i.modelValue&&i.modelValue.mbox?i.modelValue.mbox.substring(7):""},set(p){p.trim()?r("update:modelValue",{mbox:"mailto:"+p.trim()}):r("update:modelValue",null)}}),l=k({get(){return i.modelValue&&i.modelValue.openid?i.modelValue.openid:""},set(p){p.trim()?r("update:modelValue",{openid:p.trim()}):r("update:modelValue",null)}}),o=k({get(){return i.modelValue&&i.modelValue.account?i.modelValue.account.name:u.value},set(p){u.value=p,p.trim()||f.value.trim()?r("update:modelValue",{account:{name:p.trim(),homePage:f.value.trim()}}):r("update:modelValue",null)}}),O=k({get(){return i.modelValue&&i.modelValue.account?i.modelValue.account.homePage:f.value},set(p){f.value=p,p.trim()||u.value.trim()?r("update:modelValue",{account:{name:u.value.trim(),homePage:p.trim()}}):r("update:modelValue",null)}}),S="/trax/api/gateway/front/stores/"+a()+"/agent-ids",V=(p,v)=>v=="agent"?{sort:["sid_field_1"],limit:10,filters:{sid_type:t.value,in_sid_field_1:p},distinct:["sid_field_1"]}:{sort:["sid_field_2"],limit:10,filters:{sid_type:t.value,in_sid_field_2:p},distinct:["sid_field_2"]},q=(p,v)=>t.value=="mbox"?p.sid_field_1.split("mailto:")[1]:v=="agent"?p.sid_field_1:p.sid_field_2;return(p,v)=>(m(),$(X,null,[b(ee,{id:"agent-type",options:d,modelValue:g.value,"onUpdate:modelValue":v[0]||(v[0]=n=>g.value=n)},null,8,["modelValue"]),y("div",mt,[g.value==="mbox"?(m(),A(B,{key:0,id:"agent",prefix:"mailto:",placeholder:"agent@email.test",class:j([e.rounded?"rounded-none rounded-r":"rounded-none"]),modelValue:w.value,"onUpdate:modelValue":v[1]||(v[1]=n=>w.value=n),error:e.error,showError:e.showError,"onUpdate:error":v[2]||(v[2]=n=>p.$emit("update:error",n)),onApply:v[3]||(v[3]=n=>p.$emit("apply")),completionEndpoint:S,completionParams:V,completionFormatProposal:q},null,8,["class","modelValue","error","showError"])):R("",!0),g.value==="openid"?(m(),A(B,{key:1,id:"agent",placeholder:"http://openid",class:j([e.rounded?"rounded-none rounded-r":"rounded-none"]),modelValue:l.value,"onUpdate:modelValue":v[4]||(v[4]=n=>l.value=n),error:e.error,showError:e.showError,"onUpdate:error":v[5]||(v[5]=n=>p.$emit("update:error",n)),onApply:v[6]||(v[6]=n=>p.$emit("apply")),completionEndpoint:S,completionParams:V,completionFormatProposal:q},null,8,["class","modelValue","error","showError"])):R("",!0),g.value==="account"?(m(),A(B,{key:2,id:"agent",placeholder:"name",class:"rounded-none",modelValue:o.value,"onUpdate:modelValue":v[7]||(v[7]=n=>o.value=n),error:e.error,showError:e.showError,"onUpdate:error":v[8]||(v[8]=n=>p.$emit("update:error",n)),onApply:v[9]||(v[9]=n=>p.$emit("apply")),completionEndpoint:S,completionParams:V,completionFormatProposal:q},null,8,["modelValue","error","showError"])):R("",!0),g.value==="account"?(m(),A(B,{key:3,id:"agent_homepage",placeholder:"http://homepage",class:j([e.rounded?"rounded-none rounded-r":"rounded-none"]),modelValue:O.value,"onUpdate:modelValue":v[10]||(v[10]=n=>O.value=n),error:e.error,showError:e.showError,"onUpdate:error":v[11]||(v[11]=n=>p.$emit("update:error",n)),onApply:v[12]||(v[12]=n=>p.$emit("apply")),completionEndpoint:S,completionParams:V,completionFormatProposal:q},null,8,["class","modelValue","error","showError"])):R("",!0)])],64))}},ft={class:"basis-28 pt-1 block text-sm font-medium leading-6 text-gray-900 dark:text-gray-200"},vt={key:0},gt={key:1},K={__name:"InputLabel",props:{value:{type:String}},setup(e){return(s,a)=>(m(),$("label",ft,[e.value?(m(),$("span",vt,z(e.value),1)):(m(),$("span",gt,[le(s.$slots,"default")]))]))}},yt={class:"relative md:col-span-2 flex flex-row"},bt={class:"w-full"},xt={__name:"AgentFilterInStatements",props:{modelValue:{type:Object,required:!1},location:{type:String,default:"everywhere"},error:{type:String,required:!1}},emits:["update:modelValue","update:location","update:error","apply"],setup(e,{emit:s}){const a=e,i=s,r=[{id:"everywhere",name:"Everywhere"},{id:"actor",name:"As the actor"},{id:"object",name:"As the object"}];return Z(()=>{i("update:location",a.location)}),(d,t)=>(m(),$("div",yt,[b(K,{for:"agent",value:"Agent"}),y("div",bt,[y("div",{class:j(["flex rounded-md w-full",e.error?"ring-2 ring-red-500 dark:ring-red-400":""])},[b(ct,{rounded:!1,modelValue:e.modelValue,error:e.error,showError:!1,"onUpdate:modelValue":t[0]||(t[0]=u=>d.$emit("update:modelValue",u)),"onUpdate:error":t[1]||(t[1]=u=>d.$emit("update:error",u)),onApply:t[2]||(t[2]=u=>d.$emit("apply"))},null,8,["modelValue","error"]),b(ee,{id:"agent-where",right:!0,modelValue:e.location,"onUpdate:modelValue":t[3]||(t[3]=u=>d.$emit("update:location",u)),options:r},null,8,["modelValue"])],2),b(J,{error:e.error},null,8,["error"])])]))}},Vt={class:"relative md:col-span-2 flex flex-row"},wt="iri",ht={__name:"VerbFilter",props:{modelValue:{type:String,required:!0},error:{type:String,required:!1}},emits:["update:modelValue","update:error","apply"],setup(e){const{currentStore:s}=Q(),a="/trax/api/gateway/front/stores/"+s()+"/verbs",i=r=>({sort:["iri"],limit:10,filters:{in_iri:r}});return(r,d)=>(m(),$("div",Vt,[b(K,{for:"verb",value:"Verb"}),b(B,{id:"verb",placeholder:"http://adlnet.gov/expapi/verbs/completed",modelValue:e.modelValue,error:e.error,"onUpdate:modelValue":d[0]||(d[0]=t=>r.$emit("update:modelValue",t)),"onUpdate:error":d[1]||(d[1]=t=>r.$emit("update:error",t)),onApply:d[2]||(d[2]=t=>r.$emit("apply")),completionEndpoint:a,completionProp:wt,completionParams:i},null,8,["modelValue","error"])]))}},St="iri",kt={__name:"ActivityField",setup(e){const{currentStore:s}=Q(),a="/trax/api/gateway/front/stores/"+s()+"/activity-ids",i=r=>({sort:["iri"],limit:10,filters:{in_iri:r}});return(r,d)=>(m(),A(B,{id:"activity",placeholder:"http://my.lms.com/courses/xapi-101",completionEndpoint:a,completionProp:St,completionParams:i}))}},$t={class:"relative md:col-span-2 flex flex-row"},Ot={class:"w-full"},Pt={class:"relative flex flex-grow items-stretch focus-within:z-10"},At={__name:"ActivityFilterInStatements",props:{modelValue:{type:String,required:!0},location:{type:String,default:"everywhere"},error:{type:String,required:!1}},emits:["update:modelValue","update:location","update:error","apply"],setup(e,{emit:s}){const a=e,i=s,r=[{id:"everywhere",name:"Everywhere"},{id:"object",name:"As the object"}];return Z(()=>{i("update:location",a.location)}),(d,t)=>(m(),$("div",$t,[b(K,{for:"activity",value:"Activity"}),y("div",Ot,[y("div",{class:j(["flex rounded-md w-full",e.error?"ring-2 ring-red-500 dark:ring-red-400":""])},[y("div",Pt,[b(kt,{class:"rounded-none rounded-l",modelValue:e.modelValue,error:e.error,showError:!1,"onUpdate:modelValue":t[0]||(t[0]=u=>d.$emit("update:modelValue",u)),"onUpdate:error":t[1]||(t[1]=u=>d.$emit("update:error",u)),onApply:t[2]||(t[2]=u=>d.$emit("apply"))},null,8,["modelValue","error"])]),b(ee,{id:"activity-where",right:!0,modelValue:e.location,"onUpdate:modelValue":t[3]||(t[3]=u=>d.$emit("update:location",u)),options:r},null,8,["modelValue"])],2),b(J,{error:e.error},null,8,["error"])])]))}},Ct="iri",Lt={__name:"ActivityTypeField",setup(e){const{currentStore:s}=Q(),a="/trax/api/gateway/front/stores/"+s()+"/activity-types",i=r=>({sort:["iri"],limit:10,filters:{in_iri:r}});return(r,d)=>(m(),A(B,{id:"activity-type",placeholder:"https://w3id.org/xapi/cmi5/activitytype/course",completionEndpoint:a,completionProp:Ct,completionParams:i}))}},Et={class:"relative md:col-span-2 flex flex-row"},Ft={class:"w-full"},Ut={class:"relative flex flex-grow items-stretch focus-within:z-10"},jt={__name:"ActivityTypeFilterInStatements",props:{modelValue:{type:String,required:!0},error:{type:String,required:!1}},emits:["update:modelValue","update:error","apply"],setup(e){const s=[{id:"object",name:"In the object"}];return(a,i)=>(m(),$("div",Et,[b(K,{for:"activity-type",value:"Act. Type"}),y("div",Ft,[y("div",{class:j(["flex rounded-md w-full",e.error?"ring-2 ring-red-500 dark:ring-red-400":""])},[y("div",Ut,[b(Lt,{class:"rounded-none rounded-l",modelValue:e.modelValue,error:e.error,showError:!1,"onUpdate:modelValue":i[0]||(i[0]=r=>a.$emit("update:modelValue",r)),"onUpdate:error":i[1]||(i[1]=r=>a.$emit("update:error",r)),onApply:i[2]||(i[2]=r=>a.$emit("apply"))},null,8,["modelValue","error"])]),b(ee,{id:"activity-type-where",right:!0,disabled:!0,modelValue:"object",options:s})],2),b(J,{error:e.error},null,8,["error"])])]))}},qt={class:"relative md:col-span-2 flex flex-row"},Rt="iri",It={__name:"XapiProfileFilter",props:{modelValue:{type:String,required:!0},error:{type:String,required:!1}},emits:["update:modelValue","update:error","apply"],setup(e){const{currentStore:s}=Q(),a="/trax/api/gateway/front/stores/"+s()+"/activities",i=r=>({sort:["iri"],limit:10,filters:{in_iri:r,is_category:1}});return(r,d)=>(m(),$("div",qt,[b(K,{for:"profile",value:"xAPI Profile"}),b(B,{id:"profile",placeholder:"https://w3id.org/xapi/cmi5/context/categories/cmi5",modelValue:e.modelValue,error:e.error,"onUpdate:modelValue":d[0]||(d[0]=t=>r.$emit("update:modelValue",t)),"onUpdate:error":d[1]||(d[1]=t=>r.$emit("update:error",t)),completionEndpoint:a,completionProp:Rt,completionParams:i},null,8,["modelValue","error"])]))}},se={__name:"TimestampFilter",props:{id:{type:String,required:!0}},setup(e){return(s,a)=>(m(),A(B,{id:e.id,placeholder:"2020-12-31 23:59:59"},null,8,["id"]))}},Bt={class:"relative flex flex-row"},Tt={class:"relative flex flex-row"},Mt={__name:"TimeFilters",props:{since:{type:String,required:!0},until:{type:String,required:!0},errors:{type:Object,required:!0}},emits:["update:since","update:until","apply"],setup(e){return(s,a)=>(m(),$(X,null,[y("div",Bt,[b(K,{for:"since",value:"Since (>=)",class:"sm:basis-32"}),b(se,{id:"since",modelValue:e.since,error:e.errors.since,"onUpdate:error":a[0]||(a[0]=i=>e.errors.since=i),"onUpdate:modelValue":a[1]||(a[1]=i=>s.$emit("update:since",i)),onApply:a[2]||(a[2]=i=>s.$emit("apply"))},null,8,["modelValue","error"])]),y("div",Tt,[b(K,{for:"until",value:"Until (<)"}),b(se,{id:"until",modelValue:e.until,error:e.errors.until,"onUpdate:error":a[3]||(a[3]=i=>e.errors.until=i),"onUpdate:modelValue":a[4]||(a[4]=i=>s.$emit("update:until",i)),onApply:a[5]||(a[5]=i=>s.$emit("apply"))},null,8,["modelValue","error"])])],64))}},Dt={class:"relative flex items-start"},Nt={class:"flex h-6 items-center"},zt=["name","id"],Kt={class:"ml-3 text-sm leading-6"},Zt=["for"],Ht={__name:"Checkbox",props:{id:{type:String,required:!0},label:{type:String,required:!0},modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:s}){const a=e,i=s,r=k({get(){return a.modelValue},set(d){i("update:modelValue",d)}});return(d,t)=>(m(),$("div",Dt,[y("div",Nt,[ue(y("input",{name:e.id,id:e.id,type:"checkbox",class:"cursor-pointer h-4 w-4 rounded border-gray-400 text-indigo-600 accent-pink-500 focus:ring-2 focus:ring-indigo-600 dark:border-gray-400 dark:text-indigo-400 dark:bg-gray-800 dark:focus:ring-indigo-400 dark:ring-offset-gray-700","onUpdate:modelValue":t[0]||(t[0]=u=>r.value=u)},null,8,zt),[[Ve,r.value]])]),y("div",Kt,[y("label",{for:e.id,class:"cursor-pointer font-medium text-gray-900 dark:text-gray-200"},z(e.label),9,Zt)])]))}},Jt=["disabled"],Qt={key:0,"aria-hidden":"true",role:"status",class:"inline w-4 h-4 mr-2 text-indigo animate-spin",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Gt=y("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor","fill-opacity":"0.4"},null,-1),Wt=y("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentColor"},null,-1),Xt=[Gt,Wt],Yt={__name:"LinkButton",props:{processing:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:s}){return(a,i)=>(m(),$("button",{type:"button",onClick:i[0]||(i[0]=r=>a.$emit("click")),disabled:e.processing,class:j([e.processing?"":"hover:text-indigo-500 dark:hover:bg-white/10","rounded px-3.5 py-2 text-sm font-semibold text-indigo-600 bg-transparent focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 dark:text-fuchsia-400 dark:focus-visible:outline-fuchsia-400"])},[e.processing?(m(),$("svg",Qt,Xt)):R("",!0),le(a.$slots,"default")],10,Jt))}},_t={__name:"MoreLessButton",props:{moreLabel:{type:String,default:"More"},lessLabel:{type:String,default:"Less"},modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:s}){return(a,i)=>(m(),$("button",{type:"button",onClick:i[0]||(i[0]=r=>a.$emit("update:modelValue",!e.modelValue)),class:"inline-flex items-center gap-x-1 rounded px-3.5 py-2 text-sm font-semibold text-indigo-600 bg-transparent focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 hover:text-indigo-500 dark:hover:bg-white/10 dark:text-fuchsia-400 dark:focus-visible:outline-fuchsia-400"},[te(z(e.modelValue?e.lessLabel:e.moreLabel)+" ",1),e.modelValue?(m(),A(P(lt),{key:0,class:"-mr-0.5 h-5 w-5","aria-hidden":"true"})):(m(),A(P(et),{key:1,class:"-mr-0.5 h-5 w-5","aria-hidden":"true"}))]))}};function el(e,s){const a=L(!1),i=L(!1),r=L(!1),d={...e.filters},t={...e.options};Z(()=>{u()});const u=()=>{if(s.localStorage){let o=localStorage.getItem(s.localStorage);if(o){o=JSON.parse(o),r.value=o.settings.showMoreFilters,Object.assign(e.filters,o.filters),Object.assign(e.options,o.options),g(!1);return}}g(!1)},f=()=>{s.resetFilters!==void 0?s.resetFilters():(Object.assign(e.filters,d),Object.assign(e.options,t)),g(),a.value=!1,i.value=!0},g=(o=!0)=>{const O={filters:{},options:{}};Object.keys(e.filters).forEach(S=>{w(e.filters,O.filters,S)}),Object.keys(e.options).forEach(S=>{w(e.options,O.options,S)}),o&&l(),a.value=!0,s.emit&&s.emit("apply",O),s.callback&&s.callback(O)},w=(o,O,S)=>{let V=o[S];V!=null&&(typeof V=="string"&&!V.trim()&&(o[S]=""),typeof V=="string"&&V.trim()&&(O[S]=V.trim()),(typeof V=="boolean"||typeof V=="number")&&(O[S]=V),typeof V=="object"&&(O[S]=JSON.stringify(V)))},l=()=>{s.localStorage&&localStorage.setItem(s.localStorage,JSON.stringify({filters:e.filters,options:e.options,settings:{showMoreFilters:r.value}}))};return H(()=>e.counter,()=>{a.value=!1,i.value=!1}),{resetingFilters:i,resetFilters:f,applyingFilters:a,applyFilters:g,showMoreFilters:r,recordFilters:l}}const tl={class:"relative text-right space-x-5"},ll={class:"relative text-center md:col-span-2 -mt-5"},rl={__name:"StatementFilters",props:{filters:{type:Object,required:!0},options:{type:Object,required:!0},counter:{type:Number,required:!0},errors:{type:Object,required:!0}},emits:["apply"],setup(e,{emit:s}){const a=s,i=e,{resetingFilters:r,resetFilters:d,applyingFilters:t,applyFilters:u,showMoreFilters:f,recordFilters:g}=el(i,{localStorage:"statement-filters",emit:a});return H(f,w=>{g(),w||Object.assign(i.filters,{type:"",profile:"",since:"",until:""})}),(w,l)=>(m(),A(_e,null,{default:T(()=>[b(xt,{modelValue:e.filters.agent,"onUpdate:modelValue":l[0]||(l[0]=o=>e.filters.agent=o),location:e.options.agent_location,"onUpdate:location":l[1]||(l[1]=o=>e.options.agent_location=o),error:e.errors.agent,"onUpdate:error":l[2]||(l[2]=o=>e.errors.agent=o),onApply:P(u)},null,8,["modelValue","location","error","onApply"]),b(ht,{modelValue:e.filters.verb,"onUpdate:modelValue":l[3]||(l[3]=o=>e.filters.verb=o),error:e.errors.verb,"onUpdate:error":l[4]||(l[4]=o=>e.errors.verb=o),onApply:P(u)},null,8,["modelValue","error","onApply"]),b(At,{modelValue:e.filters.activity,"onUpdate:modelValue":l[5]||(l[5]=o=>e.filters.activity=o),location:e.options.activity_location,"onUpdate:location":l[6]||(l[6]=o=>e.options.activity_location=o),error:e.errors.activity,"onUpdate:error":l[7]||(l[7]=o=>e.errors.activity=o),onApply:P(u)},null,8,["modelValue","location","error","onApply"]),P(f)?(m(),A(jt,{key:0,modelValue:e.filters.type,"onUpdate:modelValue":l[8]||(l[8]=o=>e.filters.type=o),error:e.errors.type,"onUpdate:error":l[9]||(l[9]=o=>e.errors.type=o),onApply:P(u)},null,8,["modelValue","error","onApply"])):R("",!0),P(f)?(m(),A(It,{key:1,modelValue:e.filters.profile,"onUpdate:modelValue":l[10]||(l[10]=o=>e.filters.profile=o),error:e.errors.profile,"onUpdate:error":l[11]||(l[11]=o=>e.errors.profile=o),onApply:P(u)},null,8,["modelValue","error","onApply"])):R("",!0),P(f)?(m(),A(Mt,{key:2,since:e.filters.since,"onUpdate:since":l[12]||(l[12]=o=>e.filters.since=o),until:e.filters.until,"onUpdate:until":l[13]||(l[13]=o=>e.filters.until=o),errors:e.errors,onApply:P(u)},null,8,["since","until","errors","onApply"])):R("",!0),b(Ht,{id:"ascending",label:"Chronological",modelValue:e.options.ascending,"onUpdate:modelValue":l[14]||(l[14]=o=>e.options.ascending=o)},null,8,["modelValue"]),y("div",tl,[b(Yt,{processing:P(r),onClick:P(d)},{default:T(()=>[te("Reset")]),_:1},8,["processing","onClick"]),b(Be,{processing:P(t),onClick:P(u)},{default:T(()=>[te("Apply")]),_:1},8,["processing","onClick"])]),y("div",ll,[b(_t,{modelValue:P(f),"onUpdate:modelValue":l[15]||(l[15]=o=>we(f)?f.value=o:null),moreLabel:"More filters",lessLabel:"Less filters"},null,8,["modelValue"])])]),_:1}))}},sl=Object.freeze(Object.defineProperty({__proto__:null,default:rl},Symbol.toStringTag,{value:"Module"}));export{He as A,Je as F,Ke as I,sl as S,Qe as _,lt as a,rl as b,Ze as j,tt as r,Q as u};
